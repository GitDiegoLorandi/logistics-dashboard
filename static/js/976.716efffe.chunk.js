/*! For license information please see 976.716efffe.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklogistics_dashboard_frontend=self.webpackChunklogistics_dashboard_frontend||[]).push([[976],{5976:(e,r,t)=>{t.r(r),t.d(r,{default:()=>w});var s=t(9643),o=t(8256),a=t(6207),l=t(4513),n=t(923),i=t(6314),c=t(6681),d=t(9320),u=t(2665),h=t(997),g=t(4293),m=t(6677),p=t(5934),v=t(6507);const w=()=>{const{t:e}=(0,a.Bd)(["auth","common"]),r=(0,o.Zp)(),[t,w]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[f,x]=(0,s.useState)({email:"",password:""}),[j,A]=(0,s.useState)({});s.useEffect((()=>{localStorage.getItem("authToken")&&r("/dashboard")}),[r]);const k=e=>{const{name:r,value:t}=e.target;x((e=>({...e,[r]:t}))),j[r]&&A((e=>({...e,[r]:null})))};return(0,v.jsx)("div",{className:"grid min-h-screen place-items-center bg-gradient-to-br from-primary/20 to-secondary/20 p-4",children:(0,v.jsx)("div",{className:"w-full max-w-md overflow-hidden rounded-lg bg-card shadow-lg",children:(0,v.jsxs)("div",{className:"p-8",children:[(0,v.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,v.jsx)("h1",{className:"text-2xl font-bold",children:e("app.title",{ns:"common"})})]}),(0,v.jsx)(p.A,{})]}),(0,v.jsx)("p",{className:"mb-8 text-center text-muted-foreground",children:e("login.subtitle")}),(0,v.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const s=(()=>{const r={};return f.email?/\S+@\S+\.\S+/.test(f.email)||(r.email=e("login.errors.emailInvalid")):r.email=e("login.errors.emailRequired"),f.password||(r.password=e("login.errors.passwordRequired")),r})();if(Object.keys(s).length>0)A(s);else{w(!0),A({});try{var o,a,i;console.log("Attempting login with email:",f.email);const t=await l.R2.login(f);console.log("Login successful, response:",t),console.log("User role from response:",null===(o=t.user)||void 0===o?void 0:o.role),t.token?(console.log("Storing auth token in localStorage"),localStorage.setItem("authToken",t.token),t.user&&(console.log("Storing user data in localStorage:",t.user),localStorage.setItem("user",JSON.stringify(t.user)))):console.warn("No token received in login response"),n.oR.success(e("login.welcome",{name:(null===(a=t.user)||void 0===a?void 0:a.name)||(null===(i=t.user)||void 0===i?void 0:i.email)||e("common.user")})),r("/dashboard")}catch(c){console.error("Login error:",c);let r=e("login.errors.generic");r=c.status?c.message||e("login.errors.server",{status:c.status}):c.request?e("login.errors.network"):c.message,n.oR.error(r),A({general:r})}finally{w(!1)}}},className:"space-y-6",children:[j.general&&(0,v.jsx)("div",{className:"rounded-md border border-destructive bg-destructive/10 p-4 text-sm text-destructive",children:j.general}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:e("login.email")}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,v.jsx)("input",{type:"email",id:"email",name:"email",value:f.email,onChange:k,className:(0,c.cn)("w-full pl-10 pr-4 py-2 h-10 border rounded-md bg-background",j.email?"border-destructive focus:ring-destructive/30":"border-input focus:border-ring focus:ring-ring/30"),placeholder:e("login.emailPlaceholder",{defaultValue:"Enter your email"}),disabled:t})]}),j.email&&(0,v.jsx)("p",{className:"mt-1 text-xs text-destructive",children:j.email})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("label",{htmlFor:"password",className:"text-sm font-medium",children:e("login.password")}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(h.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,v.jsx)("input",{type:b?"text":"password",id:"password",name:"password",value:f.password,onChange:k,className:(0,c.cn)("w-full pl-10 pr-10 py-2 h-10 border rounded-md bg-background",j.password?"border-destructive focus:ring-destructive/30":"border-input focus:border-ring focus:ring-ring/30"),placeholder:e("login.passwordPlaceholder",{defaultValue:"Enter your password"}),disabled:t}),(0,v.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>y(!b),disabled:t,children:b?(0,v.jsx)(g.A,{className:"h-4 w-4"}):(0,v.jsx)(m.A,{className:"h-4 w-4"})})]}),j.password&&(0,v.jsx)("p",{className:"mt-1 text-xs text-destructive",children:j.password})]}),(0,v.jsx)(i.$,{type:"submit",className:"w-full",disabled:t,children:t?(0,v.jsxs)("div",{className:"flex items-center justify-center",children:[(0,v.jsxs)("svg",{className:"-ml-1 mr-2 h-4 w-4 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,v.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,v.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e("login.signingIn")]}):e("login.signIn")})]}),(0,v.jsx)("div",{className:"mt-8 border-t border-border pt-6",children:(0,v.jsxs)("div",{className:"rounded-md bg-muted/50 p-4 text-center text-xs text-muted-foreground",children:[(0,v.jsxs)("strong",{className:"mb-1 block",children:[e("login.demoCredentials"),":"]}),e("login.adminCredentials",{defaultValue:"Admin: admin@example.com / password123"}),(0,v.jsx)("br",{}),e("login.userCredentials",{defaultValue:"User: user@example.com / senha123"})]})})]})})})}},6314:(e,r,t)=>{t.d(r,{$:()=>a});var s=t(9643),o=t(6507);const a=s.forwardRef(((e,r)=>{let{className:t="",variant:s="default",size:a="default",children:l,isLoading:n=!1,startIcon:i,endIcon:c,gradient:d=!1,...u}=e;const h={default:d?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] hover:shadow-[var(--shadow-md)]",destructive:d?"bg-gradient-to-r from-[var(--color-error)] to-[#b91c1c] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-error)] text-white hover:bg-opacity-90 hover:shadow-[var(--shadow-md)]",outline:"border border-[var(--color-border)] bg-transparent text-[var(--text-primary)] hover:bg-[var(--input-bg)] hover:border-[var(--color-primary-light)]",secondary:d?"bg-gradient-to-r from-[var(--color-secondary)] to-[var(--color-secondary-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-secondary)] text-white hover:bg-[var(--color-secondary-dark)] hover:shadow-[var(--shadow-md)]",accent:d?"bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-accent-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-accent)] text-white hover:bg-[var(--color-accent-dark)] hover:shadow-[var(--shadow-md)]",ghost:"hover:bg-[var(--input-bg)] text-[var(--text-primary)]",link:"text-[var(--color-primary)] underline-offset-4 hover:underline hover:text-[var(--color-primary-light)]"};return(0,o.jsxs)("button",{className:`relative inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-[var(--shadow-sm)] ${h[s]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-sm",lg:"h-11 rounded-md px-8 text-lg",icon:"h-10 w-10"}[a]} ${t}`,ref:r,disabled:n||u.disabled,...u,children:[n&&(0,o.jsx)("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,o.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,o.jsxs)("span",{className:n?"invisible":"flex items-center gap-2",children:[i&&(0,o.jsx)("span",{className:"mr-1",children:i}),l,c&&(0,o.jsx)("span",{className:"ml-1",children:c})]})]})}));a.displayName="Button"},5934:(e,r,t)=>{t.d(r,{A:()=>n});var s=t(9643),o=t(6207),a=t(6314),l=t(6507);const n=e=>{let{className:r=""}=e;const{i18n:t}=(0,o.Bd)(),[n,i]=(0,s.useState)(t.language);(0,s.useEffect)((()=>{i(t.language)}),[t.language]);return(0,l.jsx)("div",{className:`flex items-center space-x-1 ${r}`,children:[{code:"en",name:"English"},{code:"pt",name:"Portugu\xeas"}].map((e=>(0,l.jsx)(a.$,{variant:n===e.code?"default":"ghost",size:"sm",onClick:()=>{return r=e.code,t.changeLanguage(r),i(r),void localStorage.setItem("preferredLanguage",r);var r},className:"px-2 py-1 text-xs "+(n===e.code?"font-bold":"font-normal"),children:e.code.toUpperCase()},e.code)))})}},6681:(e,r,t)=>{t.d(r,{cn:()=>a});var s=t(569),o=t(8573);function a(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,s.$)(r))}},4513:(e,r,t)=>{t.d(r,{Eo:()=>n,R2:()=>o,ZR:()=>a,l1:()=>l,vS:()=>i});const s=t(3231).A.create({baseURL:"https://logistics-dashboard.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const r=localStorage.getItem("authToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e}),(e=>(console.error("Request interceptor error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>e.data),(e=>{if(e.response){var r;const{status:t,data:s}=e.response;return 401===t&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),console.error(`API Error: ${t} - ${null===(r=e.config)||void 0===r?void 0:r.url}`),Promise.reject({status:t,message:(null===s||void 0===s?void 0:s.message)||"An error occurred",errors:(null===s||void 0===s?void 0:s.errors)||{},data:s})}return e.request?(console.error("API Error: No response received"),Promise.reject({status:0,message:"No response received from server",errors:{}})):(console.error("API Error: Request setup failed"),Promise.reject({status:0,message:e.message||"Request setup failed",errors:{}}))}));const o={login:e=>s.post("/auth/login",e).then((e=>(e.token&&(localStorage.setItem("authToken",e.token),e.user&&localStorage.setItem("user",JSON.stringify(e.user))),e))),register:e=>s.post("/auth/register",e),logout:()=>(localStorage.removeItem("authToken"),localStorage.removeItem("user"),s.post("/auth/logout")),getCurrentUser:()=>s.get("/auth/me"),isAuthenticated:()=>!!localStorage.getItem("authToken"),getStoredUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null}},a={getAll:async e=>{try{const r=await s.get("/deliveries",{params:e});return Array.isArray(r)?{docs:r,totalDocs:r.length,totalPages:1,page:1}:r||{docs:[],totalDocs:0,totalPages:0,page:1}}catch(r){throw r}},getById:e=>s.get(`/deliveries/${e}`),create:async e=>{try{if(!localStorage.getItem("authToken"))throw new Error("Authentication required. Please log in.");return await s.post("/deliveries",e)}catch(r){throw console.error("Error in deliveryAPI.create"),r}},update:(e,r)=>s.put(`/deliveries/${e}`,r),delete:async e=>{try{if(!e)throw new Error("Delivery ID is required");return await s.delete(`/deliveries/${e}`)}catch(r){throw console.error(`Error deleting delivery: ${r.message}`),r}},updateStatus:(e,r)=>s.patch(`/deliveries/${e}/status`,{status:r}),assign:(e,r)=>s.patch(`/deliveries/${e}/assign`,{delivererId:r}),getAvailable:()=>s.get("/deliveries/available")},l={getAll:async e=>{try{return await s.get("/deliverers",{params:e})||[]}catch(r){throw r}},getById:e=>s.get(`/deliverers/${e}`),create:async e=>{try{if(!localStorage.getItem("authToken"))throw new Error("Authentication required. Please log in.");return await s.post("/deliverers",e)}catch(r){throw console.error("Error in delivererAPI.create"),r}},update:async(e,r)=>{try{return await s.put(`/deliverers/${e}`,r)}catch(t){throw console.error(`Error in delivererAPI.update for ID ${e}:`,t),t}},delete:e=>s.delete(`/deliverers/${e}`),getStats:(e,r)=>s.get(`/deliverers/${e}/stats`,{params:r}),updateStatus:(e,r)=>s.patch(`/deliverers/${e}/status`,{status:r}),assignDelivery:(e,r)=>s.patch(`/deliverers/${e}/assign`,{deliveryId:r}),getAvailableDeliveries:()=>s.get("/deliveries/available")},n={getAll:e=>s.get("/users",{params:e}),getProfile:async()=>{try{const r=localStorage.getItem("user");if(r){const t=JSON.parse(r);try{const e=await s.get("/users/profile");return localStorage.setItem("user",JSON.stringify(e)),e}catch(e){return t}}if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const t=await s.get("/users/profile");return localStorage.setItem("user",JSON.stringify(t)),t}catch(r){throw console.warn("Error fetching user profile"),r}},getById:e=>s.get(`/users/${e}`),updateProfile:e=>s.put("/users/profile",e),updateRole:(e,r)=>s.put(`/users/${e}/role`,{role:r}),changePassword:e=>s.put("/users/change-password",e),deactivate:e=>s.put(`/users/${e}/deactivate`),delete:e=>s.delete(`/users/${e}`)},i={getStatus:async()=>{try{const e=await s.get("/jobs/status");if(!e)throw new Error("Empty response from jobs status API");return e}catch(e){return console.error("Error fetching jobs status"),{isRunning:!1,totalJobs:0,activeJobs:0,successRate:0,lastRun:null,jobs:[],systemHealth:{status:"unknown",issuesCount:0},recentRuns:[]}}},getHealth:async()=>{try{return await s.get("/jobs/health")}catch(e){throw console.error("Error in jobsAPI.getHealth:",e),e}},getPerformance:async()=>{try{return await s.get("/jobs/performance")}catch(e){throw console.error("Error in jobsAPI.getPerformance:",e),e}},getDashboard:async()=>{try{return await s.get("/jobs/dashboard")}catch(e){throw console.error("Error in jobsAPI.getDashboard:",e),e}},runJob:async e=>{try{return await s.post(`/jobs/run/${e}`)}catch(r){throw console.error(`Error in jobsAPI.runJob for job ${e}:`,r),r}},startJob:async e=>{try{return await s.post(`/jobs/run/${e}`)}catch(r){throw console.error(`Error in jobsAPI.startJob for job ${e}:`,r),r}},stopJob:async e=>{try{return await s.post(`/jobs/stop/${e}`)}catch(r){throw console.error(`Error in jobsAPI.stopJob for job ${e}:`,r),r}},startAllJobs:async()=>{try{return await s.post("/jobs/start")}catch(e){throw console.error("Error in jobsAPI.startAllJobs:",e),e}},stopAllJobs:async()=>{try{return await s.post("/jobs/stop")}catch(e){throw console.error("Error in jobsAPI.stopAllJobs:",e),e}}}},4293:(e,r,t)=>{t.d(r,{A:()=>s});const s=(0,t(541).A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},6677:(e,r,t)=>{t.d(r,{A:()=>s});const s=(0,t(541).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},997:(e,r,t)=>{t.d(r,{A:()=>s});const s=(0,t(541).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2665:(e,r,t)=>{t.d(r,{A:()=>s});const s=(0,t(541).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9320:(e,r,t)=>{t.d(r,{A:()=>s});const s=(0,t(541).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])}}]);
//# sourceMappingURL=976.716efffe.chunk.js.map
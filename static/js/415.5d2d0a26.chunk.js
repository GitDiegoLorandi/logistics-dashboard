"use strict";(self.webpackChunklogistics_dashboard_frontend=self.webpackChunklogistics_dashboard_frontend||[]).push([[415],{7415:(e,r,t)=>{t.r(r),t.d(r,{default:()=>J});var a=t(9643),s=t(6207),o=t(7967),l=t(1382),i=t(9320),n=t(7222),d=t(4289),c=t(6229),h=t(591),u=t(6784),m=t(3083),g=t(4626),v=t(6739),x=t(4513),p=t(1868),b=t(6507);var y=t(5668),f=t(237),w=t(6478),j=t(3089),N=t(9408),A=t(1997),$=t(7447),k=t(4755);const I=e=>{let{data:r=[],lines:t=[],xAxisDataKey:a="name",yAxisLabel:s,xAxisLabel:o,title:l,connectNulls:i=!1,showGrid:n=!0,className:d}=e;const c=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4"],h=t.map(((e,r)=>({...e,color:e.color||c[r%c.length],type:e.type||"monotone",strokeWidth:e.strokeWidth||2,dot:void 0===e.dot||e.dot})));return(0,b.jsxs)("div",{className:`w-full ${d||""}`,children:[l&&(0,b.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:l}),(0,b.jsx)(y.u,{width:"100%",height:300,children:(0,b.jsxs)(f.b,{data:r,margin:{top:20,right:30,left:40,bottom:40},children:[n&&(0,b.jsx)(w.d,{strokeDasharray:"3 3",opacity:.3}),(0,b.jsx)(j.W,{dataKey:a,label:o?{value:o,position:"insideBottom",offset:-10}:null}),(0,b.jsx)(N.h,{label:s?{value:s,angle:-90,position:"insideLeft"}:null}),(0,b.jsx)(A.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.1)"}}),(0,b.jsx)($.s,{}),h.map((e=>(0,b.jsx)(k.N,{type:e.type,dataKey:e.dataKey,name:e.name||e.dataKey,stroke:e.color,strokeWidth:e.strokeWidth,dot:e.dot,activeDot:{r:6},connectNulls:i},e.dataKey)))]})})]})};var S=t(1320),D=t(9968),P=t(5685);const E=e=>{let{data:r=[],dataKey:t="value",nameKey:a="name",colors:s,title:o,donut:l=!1,innerRadius:i=60,outerRadius:n=80,className:d}=e;const c=s||["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f43f5e","#14b8a6","#8b5cf6"];return(0,b.jsxs)("div",{className:`w-full ${d||""}`,children:[o&&(0,b.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:o}),(0,b.jsx)(y.u,{width:"100%",height:300,children:(0,b.jsxs)(S.r,{margin:{top:20,right:30,left:30,bottom:20},children:[(0,b.jsx)(D.F,{data:r,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:r,percent:t}=e;return`${r}: ${(100*t).toFixed(0)}%`},outerRadius:n,innerRadius:l?i:0,fill:"#8884d8",dataKey:t,nameKey:a,children:r.map(((e,r)=>(0,b.jsx)(P.f,{fill:c[r%c.length]},`cell-${r}`)))}),(0,b.jsx)(A.m,{formatter:e=>e,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.1)"}}),(0,b.jsx)($.s,{})]})})]})};var R=t(6314);const T=e=>{let{title:r,value:t,icon:a,delay:s=0,gradient:o,textColor:l="text-white"}=e;return(0,b.jsxs)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s},className:`rounded-lg bg-gradient-to-br ${o} p-6 shadow-[var(--shadow-lg)] hover:shadow-[var(--shadow-xl)] transition-all duration-300 hover:-translate-y-1 ${l}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"rounded-full bg-white/20 p-2 backdrop-blur-sm",children:a}),(0,b.jsx)("span",{className:"text-3xl font-bold",children:t})]}),(0,b.jsx)("div",{className:"mt-2 text-sm font-medium opacity-90",children:r})]})},C=e=>{let{title:r,value:t,icon:a,trend:s,trendValue:o,gradient:l}=e;return(0,b.jsxs)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:`rounded-lg bg-gradient-to-br ${l} p-6 shadow-[var(--shadow-lg)] text-white`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"rounded-full bg-white/20 p-2 backdrop-blur-sm",children:a}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-2xl font-bold",children:t}),(0,b.jsxs)("div",{className:"flex items-center "+("up"===s?"text-green-300":"text-red-300"),children:["up"===s?(0,b.jsx)(m.A,{className:"h-4 w-4"}):(0,b.jsx)(g.A,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:o})]})]})]}),(0,b.jsx)("div",{className:"mt-2 text-sm font-medium opacity-90",children:r})]})},J=()=>{const{t:e}=(0,s.Bd)(["dashboard","common","navigation"]),[r,t]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[v,y]=(0,a.useState)(null),f=async()=>{try{g(!0),y(null),console.log("Fetching dashboard data from APIs...");const[e,r,a]=await Promise.all([x.ZR.getAll(),x.l1.getAll(),x.Eo.getProfile().catch((()=>null))]),s=(null===e||void 0===e?void 0:e.docs)||[],o=s.filter((e=>"Delivered"===e.status)).length,l=s.filter((e=>"Pending"===e.status)).length,i=s.filter((e=>"In Transit"===e.status)).length,n=s.filter((e=>"Cancelled"===e.status)).length,d=[{name:"Delivered",value:o},{name:"Pending",value:l},{name:"In Transit",value:i},{name:"Cancelled",value:n}].filter((e=>e.value>0)),c=new Date;c.setDate(c.getDate()-7);const h=new Map;s.forEach((e=>{const r=new Date(e.createdAt||e.created_at||Date.now()).toISOString().split("T")[0];h.has(r)||h.set(r,{date:r,completed:0,pending:0}),"Delivered"===e.status?h.get(r).completed+=1:"Pending"!==e.status&&"In Transit"!==e.status||(h.get(r).pending+=1)}));const u=Array.from(h.values()).sort(((e,r)=>new Date(e.date)-new Date(r.date))).slice(-7),m=o,v=s.filter((e=>"Delivered"===e.status&&new Date(e.deliveredAt||e.delivered_at)<=new Date(e.expectedDeliveryDate||e.expected_delivery_date))).length,p=m>0?Math.round(v/m*100):0,b=a||{role:"unknown"},f={deliveries:{total:s.length,pending:l,inTransit:i,completed:o,failed:n,byStatus:d,trends:u.length>0?u:[{date:(new Date).toISOString().split("T")[0],completed:0,pending:0}]},deliverers:{total:Array.isArray(r)?r.length:0,active:Array.isArray(r)?r.filter((e=>"active"===e.status||"Active"===e.status)).length:0,inactive:Array.isArray(r)?r.filter((e=>"active"!==e.status&&"Active"!==e.status)).length:0,onDelivery:Array.isArray(r)?r.filter((e=>e.currentDelivery||e.current_delivery)).length:0},users:{total:b?1:0,admins:"admin"===b.role?1:0,managers:"manager"===b.role?1:0,operators:"user"===b.role?1:0},performance:{onTimeDeliveryRate:p,averageDeliveryTime:0,customerSatisfaction:0}};console.log("Dashboard data processed:",f),t(f)}catch(e){console.error("Error loading dashboard data:",e),y(e.message||"Failed to load dashboard data")}finally{g(!1)}};(0,a.useEffect)((()=>{f()}),[]);const w=()=>{f()};if(m)return(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-[var(--color-primary)] border-t-transparent shadow-lg"})});if(v&&!r)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8 text-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-amber-100 p-4 dark:bg-amber-900",children:(0,b.jsx)(o.A,{className:"h-12 w-12 text-amber-500"})}),(0,b.jsx)("h3",{className:"text-xl font-bold",children:e("dataLoadingError")}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:v}),(0,b.jsxs)(R.$,{onClick:w,className:"mt-4 flex items-center gap-2",variant:"accent",gradient:!0,children:[(0,b.jsx)(l.A,{className:"h-4 w-4"}),e("common:retry")]})]});if(!r)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8 text-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-red-100 p-4 dark:bg-red-900",children:(0,b.jsx)(o.A,{className:"h-12 w-12 text-red-500"})}),(0,b.jsx)("h3",{className:"text-xl font-bold",children:e("noDataAvailable")}),(0,b.jsxs)(R.$,{onClick:w,className:"mt-4 flex items-center gap-2",variant:"accent",gradient:!0,children:[(0,b.jsx)(l.A,{className:"h-4 w-4"}),e("common:retry")]})]});const{deliveries:j,deliverers:N,users:A,performance:$}=r;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-[var(--color-primary-light)] to-[var(--color-primary)] p-4 rounded-lg text-white shadow-[var(--shadow-md)]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:e("title")}),(0,b.jsx)("p",{className:"opacity-90",children:e("summary")})]}),(0,b.jsxs)(R.$,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm border-white/40 hover:bg-white/30 text-white",children:[(0,b.jsx)(l.A,{className:"h-4 w-4"}),e("common:refresh")]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(T,{title:e("deliveriesTotal"),value:j.total,icon:(0,b.jsx)(i.A,{className:"h-5 w-5"}),delay:0,gradient:"from-blue-500 to-blue-700",textColor:"text-white"}),(0,b.jsx)(T,{title:e("deliveriesPending"),value:j.pending,icon:(0,b.jsx)(n.A,{className:"h-5 w-5"}),delay:.1,gradient:"from-amber-500 to-amber-700",textColor:"text-white"}),(0,b.jsx)(T,{title:e("deliveriesCompleted"),value:j.completed,icon:(0,b.jsx)(d.A,{className:"h-5 w-5"}),delay:.2,gradient:"from-green-500 to-green-700",textColor:"text-white"}),(0,b.jsx)(T,{title:e("deliveriesFailed"),value:j.failed,icon:(0,b.jsx)(o.A,{className:"h-5 w-5"}),delay:.3,gradient:"from-red-500 to-red-700",textColor:"text-white"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(C,{title:e("onTimeRate"),value:`${$.onTimeDeliveryRate}%`,icon:(0,b.jsx)(c.A,{className:"h-5 w-5"}),trend:$.onTimeDeliveryRate>80?"up":"down",trendValue:"+5%",gradient:"from-purple-500 to-indigo-600"}),(0,b.jsx)(C,{title:e("activeDeliverers"),value:`${N.active}/${N.total}`,icon:(0,b.jsx)(h.A,{className:"h-5 w-5"}),trend:"up",trendValue:"+2",gradient:"from-cyan-500 to-blue-600"}),(0,b.jsx)(C,{title:e("userActivity"),value:A.total,icon:(0,b.jsx)(u.A,{className:"h-5 w-5"}),trend:"up",trendValue:"+3",gradient:"from-emerald-500 to-teal-600"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[j.trends&&j.trends.length>0?(0,b.jsxs)(p.Zp,{variant:"default",className:"shadow-[var(--shadow-lg)]",animate:!0,children:[(0,b.jsx)(p.aR,{title:e("deliveryTrends"),subtitle:e("chartLabels.dailyDeliveryTrends"),gradient:!0}),(0,b.jsx)(p.Wu,{children:(0,b.jsx)(I,{data:j.trends,lines:[{dataKey:"completed",name:e("chartLabels.completed"),color:"var(--color-success)"},{dataKey:"pending",name:e("chartLabels.pending"),color:"var(--color-warning)"}],xAxisDataKey:"date",grid:!0,animated:!0})})]}):(0,b.jsxs)(p.Zp,{variant:"default",className:"shadow-[var(--shadow-lg)]",children:[(0,b.jsx)(p.aR,{title:e("deliveryTrends")}),(0,b.jsx)(p.Wu,{className:"flex items-center justify-center p-12",children:(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:e("noChartData")})})]}),j.byStatus&&j.byStatus.length>0?(0,b.jsxs)(p.Zp,{variant:"default",className:"shadow-[var(--shadow-lg)]",animate:!0,children:[(0,b.jsx)(p.aR,{title:e("deliveryStatus"),subtitle:e("chartLabels.deliveryStatusBreakdown"),gradient:!0}),(0,b.jsx)(p.Wu,{children:(0,b.jsx)(E,{data:j.byStatus,nameKey:"name",dataKey:"value",colors:["var(--color-success)","var(--color-warning)","var(--color-info)","var(--color-error)"],animated:!0})})]}):(0,b.jsxs)(p.Zp,{variant:"default",className:"shadow-[var(--shadow-lg)]",children:[(0,b.jsx)(p.aR,{title:e("deliveryStatus")}),(0,b.jsx)(p.Wu,{className:"flex items-center justify-center p-12",children:(0,b.jsx)("p",{className:"text-[var(--text-secondary)]",children:e("noChartData")})})]})]})]})}},6314:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(9643),s=t(6507);const o=a.forwardRef(((e,r)=>{let{className:t="",variant:a="default",size:o="default",children:l,isLoading:i=!1,startIcon:n,endIcon:d,gradient:c=!1,...h}=e;const u={default:c?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary-dark)] hover:shadow-[var(--shadow-md)]",destructive:c?"bg-gradient-to-r from-[var(--color-error)] to-[#b91c1c] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-error)] text-white hover:bg-opacity-90 hover:shadow-[var(--shadow-md)]",outline:"border border-[var(--color-border)] bg-transparent text-[var(--text-primary)] hover:bg-[var(--input-bg)] hover:border-[var(--color-primary-light)]",secondary:c?"bg-gradient-to-r from-[var(--color-secondary)] to-[var(--color-secondary-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-secondary)] text-white hover:bg-[var(--color-secondary-dark)] hover:shadow-[var(--shadow-md)]",accent:c?"bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-accent-dark)] text-white hover:shadow-[var(--shadow-md)] hover:-translate-y-0.5":"bg-[var(--color-accent)] text-white hover:bg-[var(--color-accent-dark)] hover:shadow-[var(--shadow-md)]",ghost:"hover:bg-[var(--input-bg)] text-[var(--text-primary)]",link:"text-[var(--color-primary)] underline-offset-4 hover:underline hover:text-[var(--color-primary-light)]"};return(0,s.jsxs)("button",{className:`relative inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary)] focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-[var(--shadow-sm)] ${u[a]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-sm",lg:"h-11 rounded-md px-8 text-lg",icon:"h-10 w-10"}[o]} ${t}`,ref:r,disabled:i||h.disabled,...h,children:[i&&(0,s.jsx)("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,s.jsxs)("span",{className:i?"invisible":"flex items-center gap-2",children:[n&&(0,s.jsx)("span",{className:"mr-1",children:n}),l,d&&(0,s.jsx)("span",{className:"ml-1",children:d})]})]})}));o.displayName="Button"},1868:(e,r,t)=>{t.d(r,{Wu:()=>i,Zp:()=>o,aR:()=>l});t(9643);var a=t(6739),s=t(6507);const o=e=>{let{className:r="",children:t,variant:o="default",isInteractive:l=!1,animate:i=!1,hoverEffect:n="shadow",...d}=e;const c=(()=>{if(!l)return"";switch(n){case"shadow":return"hover:shadow-[var(--shadow-lg)] cursor-pointer";case"lift":return"hover:shadow-[var(--shadow-md)] hover:-translate-y-1 cursor-pointer";case"glow":return"hover:shadow-[0_0_15px_rgba(var(--color-primary-rgb),0.5)] cursor-pointer";default:return"cursor-pointer"}})(),h=i?a.P.div:"div",u=i?{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3}}:{};return(0,s.jsx)(h,{className:`rounded-lg border transition-all duration-200 ${{default:"bg-[var(--color-card-bg)] border-[var(--color-border)] shadow-[var(--shadow-sm)]",primary:"bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-primary-dark)] border-[var(--color-primary)] text-white",secondary:"bg-gradient-to-br from-[var(--color-secondary)] to-[var(--color-secondary-dark)] border-[var(--color-secondary)] text-white",accent:"bg-gradient-to-br from-[var(--color-accent)] to-[var(--color-accent-dark)] border-[var(--color-accent)] text-white",outline:"bg-transparent border-[var(--color-border)] shadow-none",ghost:"border-none shadow-none bg-transparent"}[o]} ${c} ${r}`,...u,...d,children:t})},l=e=>{let{className:r="",children:t,title:a,subtitle:o,icon:l,action:i,gradient:n=!1,...d}=e;const c=n?"gradient-text":"";return(0,s.jsxs)("div",{className:`flex items-center justify-between p-6 pb-3 ${r}`,...d,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[l&&(0,s.jsx)("div",{className:"text-[var(--color-primary)]",children:l}),(0,s.jsxs)("div",{children:[a&&(0,s.jsx)("h3",{className:`text-lg font-semibold ${c}`,children:a}),o&&(0,s.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:o})]})]}),i&&(0,s.jsx)("div",{children:i}),t]})},i=e=>{let{className:r="",children:t,...a}=e;return(0,s.jsx)("div",{className:`p-6 pt-3 text-[var(--text-primary)] ${r}`,...a,children:t})}},4513:(e,r,t)=>{t.d(r,{Eo:()=>i,R2:()=>s,ZR:()=>o,l1:()=>l,vS:()=>n});const a=t(3231).A.create({baseURL:"https://logistics-dashboard.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use((e=>{const r=localStorage.getItem("authToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e}),(e=>(console.error("Request interceptor error:",e),Promise.reject(e)))),a.interceptors.response.use((e=>e.data),(e=>{if(e.response){var r;const{status:t,data:a}=e.response;return 401===t&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),console.error(`API Error: ${t} - ${null===(r=e.config)||void 0===r?void 0:r.url}`),Promise.reject({status:t,message:(null===a||void 0===a?void 0:a.message)||"An error occurred",errors:(null===a||void 0===a?void 0:a.errors)||{},data:a})}return e.request?(console.error("API Error: No response received"),Promise.reject({status:0,message:"No response received from server",errors:{}})):(console.error("API Error: Request setup failed"),Promise.reject({status:0,message:e.message||"Request setup failed",errors:{}}))}));const s={login:e=>a.post("/auth/login",e).then((e=>(e.token&&(localStorage.setItem("authToken",e.token),e.user&&localStorage.setItem("user",JSON.stringify(e.user))),e))),register:e=>a.post("/auth/register",e),logout:()=>(localStorage.removeItem("authToken"),localStorage.removeItem("user"),a.post("/auth/logout")),getCurrentUser:()=>a.get("/auth/me"),isAuthenticated:()=>!!localStorage.getItem("authToken"),getStoredUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null}},o={getAll:async e=>{try{const r=await a.get("/deliveries",{params:e});return Array.isArray(r)?{docs:r,totalDocs:r.length,totalPages:1,page:1}:r||{docs:[],totalDocs:0,totalPages:0,page:1}}catch(r){throw r}},getById:e=>a.get(`/deliveries/${e}`),create:async e=>{try{if(!localStorage.getItem("authToken"))throw new Error("Authentication required. Please log in.");return await a.post("/deliveries",e)}catch(r){throw console.error("Error in deliveryAPI.create"),r}},update:(e,r)=>a.put(`/deliveries/${e}`,r),delete:async e=>{try{if(!e)throw new Error("Delivery ID is required");return await a.delete(`/deliveries/${e}`)}catch(r){throw console.error(`Error deleting delivery: ${r.message}`),r}},updateStatus:(e,r)=>a.patch(`/deliveries/${e}/status`,{status:r}),assign:(e,r)=>a.patch(`/deliveries/${e}/assign`,{delivererId:r}),getAvailable:()=>a.get("/deliveries/available")},l={getAll:async e=>{try{return await a.get("/deliverers",{params:e})||[]}catch(r){throw r}},getById:e=>a.get(`/deliverers/${e}`),create:async e=>{try{if(!localStorage.getItem("authToken"))throw new Error("Authentication required. Please log in.");return await a.post("/deliverers",e)}catch(r){throw console.error("Error in delivererAPI.create"),r}},update:async(e,r)=>{try{return await a.put(`/deliverers/${e}`,r)}catch(t){throw console.error(`Error in delivererAPI.update for ID ${e}:`,t),t}},delete:e=>a.delete(`/deliverers/${e}`),getStats:(e,r)=>a.get(`/deliverers/${e}/stats`,{params:r}),updateStatus:(e,r)=>a.patch(`/deliverers/${e}/status`,{status:r}),assignDelivery:(e,r)=>a.patch(`/deliverers/${e}/assign`,{deliveryId:r}),getAvailableDeliveries:()=>a.get("/deliveries/available")},i={getAll:e=>a.get("/users",{params:e}),getProfile:async()=>{try{const r=localStorage.getItem("user");if(r){const t=JSON.parse(r);try{const e=await a.get("/users/profile");return localStorage.setItem("user",JSON.stringify(e)),e}catch(e){return t}}if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const t=await a.get("/users/profile");return localStorage.setItem("user",JSON.stringify(t)),t}catch(r){throw console.warn("Error fetching user profile"),r}},getById:e=>a.get(`/users/${e}`),updateProfile:e=>a.put("/users/profile",e),updateRole:(e,r)=>a.put(`/users/${e}/role`,{role:r}),changePassword:e=>a.put("/users/change-password",e),deactivate:e=>a.put(`/users/${e}/deactivate`),delete:e=>a.delete(`/users/${e}`)},n={getStatus:async()=>{try{const e=await a.get("/jobs/status");if(!e)throw new Error("Empty response from jobs status API");return e}catch(e){return console.error("Error fetching jobs status"),{isRunning:!1,totalJobs:0,activeJobs:0,successRate:0,lastRun:null,jobs:[],systemHealth:{status:"unknown",issuesCount:0},recentRuns:[]}}},getHealth:async()=>{try{return await a.get("/jobs/health")}catch(e){throw console.error("Error in jobsAPI.getHealth:",e),e}},getPerformance:async()=>{try{return await a.get("/jobs/performance")}catch(e){throw console.error("Error in jobsAPI.getPerformance:",e),e}},getDashboard:async()=>{try{return await a.get("/jobs/dashboard")}catch(e){throw console.error("Error in jobsAPI.getDashboard:",e),e}},runJob:async e=>{try{return await a.post(`/jobs/run/${e}`)}catch(r){throw console.error(`Error in jobsAPI.runJob for job ${e}:`,r),r}},startJob:async e=>{try{return await a.post(`/jobs/run/${e}`)}catch(r){throw console.error(`Error in jobsAPI.startJob for job ${e}:`,r),r}},stopJob:async e=>{try{return await a.post(`/jobs/stop/${e}`)}catch(r){throw console.error(`Error in jobsAPI.stopJob for job ${e}:`,r),r}},startAllJobs:async()=>{try{return await a.post("/jobs/start")}catch(e){throw console.error("Error in jobsAPI.startAllJobs:",e),e}},stopAllJobs:async()=>{try{return await a.post("/jobs/stop")}catch(e){throw console.error("Error in jobsAPI.stopAllJobs:",e),e}}}}}]);
//# sourceMappingURL=415.5d2d0a26.chunk.js.map
/*! For license information please see 946.87485361.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklogistics_dashboard_frontend=self.webpackChunklogistics_dashboard_frontend||[]).push([[946],{5818:(e,s,a)=>{a.d(s,{l:()=>l});var r=a(9643),t=a(6507);const l=function(){let{isOpen:e,open:s,onClose:a,onOpenChange:l,title:n,children:i,className:d=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=void 0!==e?e:s,o=()=>{a&&a(),l&&l(!1)};if((0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o()};return c&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[c]),!c)return null;return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:e=>{e.target===e.currentTarget&&o()},children:(0,t.jsxs)("div",{className:`max-h-[85vh] w-full max-w-md overflow-auto rounded-lg bg-background shadow-lg ${d}`,onClick:e=>e.stopPropagation(),children:[n&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b p-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:n}),(0,t.jsx)("button",{onClick:o,className:"rounded-full p-1 transition-colors hover:bg-gray-200","aria-label":"Close",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,t.jsx)("div",{className:"p-4",children:i})]})})}},9290:(e,s,a)=>{a.r(s),a.d(s,{default:()=>U});var r=a(9643),t=a(541);const l=(0,t.A)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var n=a(7333),i=a(7967),d=a(1382),c=a(9382),o=a(5114),m=a(6260),x=a(3964),h=a(2665),u=a(5964),p=a(4289),g=a(2244);const w=(0,t.A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var f=a(6677),j=a(6870),N=a(529),v=a(3329),y=a(6424),b=a(923),k=a(6207),A=a(4513),P=a(9180),C=a(9920),E=a(6314),M=a(2616),R=a(1622),S=a(1868),_=a(6687),z=a(3172),$=a(5818),D=a(6507);const L=[{_id:"user1",email:"admin@example.com",firstName:"Admin",lastName:"User",role:"admin",phone:"555-123-4567",createdAt:"2025-01-15T10:30:00Z",isActive:!0},{_id:"user2",email:"manager@example.com",firstName:"Manager",lastName:"User",role:"manager",phone:"555-234-5678",createdAt:"2025-02-20T14:45:00Z",isActive:!0},{_id:"user3",email:"user@example.com",firstName:"Regular",lastName:"User",role:"user",phone:"555-345-6789",createdAt:"2025-03-10T09:15:00Z",isActive:!0},{_id:"user4",email:"inactive@example.com",firstName:"Inactive",lastName:"User",role:"user",phone:"555-456-7890",createdAt:"2025-04-05T16:20:00Z",isActive:!1}],U=()=>{const{t:e}=(0,k.Bd)(["users","common"]),[s,a]=(0,r.useState)([]),[t,U]=(0,r.useState)(!0),[T,q]=(0,r.useState)(null),[O,Z]=(0,r.useState)(!1),[F,W]=(0,r.useState)(null),[H,B]=(0,r.useState)(null),[I,V]=(0,r.useState)(!1),[K,X]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)("create"),[ee,se]=(0,r.useState)(1),[ae,re]=(0,r.useState)(1),[te,le]=(0,r.useState)(0),[ne]=(0,r.useState)(10),[ie,de]=(0,r.useState)(""),[ce,oe]=(0,r.useState)(""),[me,xe]=(0,r.useState)(!1),[he,ue]=(0,r.useState)({email:"",firstName:"",lastName:"",phone:"",role:"user",password:"",confirmPassword:""}),[pe,ge]=(0,r.useState)({email:!1,firstName:!1,lastName:!1,phone:!1,password:!1,confirmPassword:!1,passwordMatch:!1}),[we,fe]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[je,Ne]=(0,r.useState)({currentPassword:!1,newPassword:!1,confirmPassword:!1,passwordMatch:!1});(0,r.useEffect)((()=>{(async()=>{try{const e=await A.Eo.getCurrentUser();B(e)}catch(e){console.error("Error fetching current user:",e),B(null)}})()}),[]);const ve=(0,r.useCallback)((async()=>{try{U(!0),Z(!1);const e={page:ee,limit:ne,...ce&&{role:ce},...ie&&{search:ie}},s=await A.Eo.getAll(e);a(s.docs||[]),re(s.totalPages||1),le(s.totalDocs||0),q(null)}catch(s){console.error("Error fetching users:",s),q("Failed to fetch users"),Z(!0),b.oR.error(e("users.fetchError","Failed to fetch users. Please try again later.")),a(L||[]),re(1),le(L?L.length:0)}finally{U(!1)}}),[ee,ne,ce,ie,e]);(0,r.useEffect)((()=>{ve()}),[ve]);const ye=(e,s)=>{const a={...he,[e]:s};if(ue(a),"email"===e){const e=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;ge((a=>({...a,email:!s.trim()||!e.test(s)})))}else if("firstName"===e)ge((e=>({...e,firstName:s.trim().length>0&&s.trim().length<2})));else if("lastName"===e)ge((e=>({...e,lastName:s.trim().length>0&&s.trim().length<2})));else if("phone"===e)if(s.trim()){const e=/^[+]?[0-9\s-()]{7,}$/;ge((a=>({...a,phone:!e.test(s)})))}else ge((e=>({...e,phone:!1})));else if("password"===e){const e=/\d/.test(s),r=/[a-zA-Z]/.test(s),t=s.length>=6,l=""===s.trim()||t&&e&&r;ge((e=>({...e,password:!l,passwordMatch:a.confirmPassword&&s!==a.confirmPassword})))}else"confirmPassword"===e&&ge((e=>({...e,confirmPassword:""!==s.trim()&&a.password!==s,passwordMatch:""!==s.trim()&&a.password!==s})))},be=(e,s)=>{const a={...we,[e]:s};if(fe(a),"currentPassword"===e)Ne((e=>({...e,currentPassword:!s.trim()})));else if("newPassword"===e){const e=/\d/.test(s),r=/[a-zA-Z]/.test(s),t=s.length>=6,l=""===s||t&&e&&r;Ne((e=>({...e,newPassword:!l,passwordMatch:a.confirmPassword&&s!==a.confirmPassword})))}else"confirmPassword"===e&&Ne((e=>({...e,confirmPassword:!s.trim(),passwordMatch:s!==a.newPassword})))},ke=()=>{ue({email:"",firstName:"",lastName:"",phone:"",role:"user",password:"",confirmPassword:""}),ge({email:!1,firstName:!1,lastName:!1,phone:!1,password:!1,confirmPassword:!1,passwordMatch:!1})},Ae=()=>{fe({currentPassword:"",newPassword:"",confirmPassword:""}),Ne({currentPassword:!1,newPassword:!1,confirmPassword:!1,passwordMatch:!1})},Pe=()=>{ke(),Y("create"),V(!0)},Ce=e=>"admin"===e?(0,D.jsx)(l,{size:16,className:"text-status-pending"}):(0,D.jsx)(n.A,{size:16,className:"text-status-in-transit"}),Ee=s=>{const a={admin:e("admin"),user:e("user"),manager:e("manager"),deliverer:e("deliverer")};return(0,D.jsxs)(_.E,{variant:{admin:"warning",user:"secondary",manager:"info",deliverer:"outline"}[s]||"secondary",className:"flex items-center gap-1",children:[Ce(s),a[s]||s.charAt(0).toUpperCase()+s.slice(1)]})},Me=s.filter((e=>"admin"===e.role)).length,Re=s.filter((e=>"user"===e.role)).length,Se=s.filter((e=>e.isActive)).length;return t&&0===s.length?(0,D.jsx)(P.A,{}):O?(0,D.jsxs)("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[(0,D.jsx)(i.A,{className:"mb-4 h-12 w-12 text-amber-500"}),(0,D.jsx)("h2",{className:"mb-2 text-2xl font-bold",children:e("users.errorLoadingTitle","Failed to Load Users")}),(0,D.jsx)("p",{className:"mb-6 max-w-md text-muted-foreground",children:e("users.errorLoadingDesc","There was a problem loading the users data. This could be due to a network issue or server problem.")}),(0,D.jsx)(E.$,{onClick:ve,children:e("common.tryAgain","Try Again")})]}):T&&!O?(0,D.jsx)(C.A,{message:T,onRetry:ve}):(0,D.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-6",children:[(0,D.jsxs)("div",{className:"mb-8 flex flex-col gap-6 rounded-xl bg-card p-6 shadow md:flex-row md:items-start md:justify-between",children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("h1",{className:"flex items-center gap-2 text-2xl font-bold",children:[(0,D.jsx)(n.A,{className:"h-6 w-6 text-primary"}),e("title")]}),(0,D.jsx)("p",{className:"text-muted-foreground",children:e("subtitle")})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsxs)(E.$,{variant:"outline",size:"sm",onClick:ve,disabled:t,className:"flex items-center gap-2",children:[(0,D.jsx)(d.A,{className:t?"h-4 w-4 animate-spin":"h-4 w-4"}),e("refresh",{ns:"common"})]}),(0,D.jsxs)(E.$,{onClick:Pe,size:"sm",className:"flex items-center gap-2",children:[(0,D.jsx)(c.A,{className:"h-4 w-4"}),e("newUser")]})]})]}),(0,D.jsxs)("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 md:flex-row md:items-center",children:[(0,D.jsxs)("div",{className:"relative w-full md:max-w-md",children:[(0,D.jsx)(o.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,D.jsx)(M.p,{type:"text",placeholder:e("searchPlaceholder"),value:ie,onChange:e=>de(e.target.value),className:"pl-10"})]}),(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsxs)(E.$,{variant:me?"default":"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>xe(!me),children:[(0,D.jsx)(m.A,{className:"h-4 w-4"}),e("filters",{ns:"common"})]}),ce&&(0,D.jsxs)(E.$,{variant:"destructive",size:"sm",className:"flex items-center gap-2",onClick:()=>oe(""),children:[(0,D.jsx)(x.A,{className:"h-4 w-4"}),e("clear",{ns:"common"})]})]})]}),me&&(0,D.jsx)("div",{className:"mb-6 rounded-xl bg-card p-6 shadow",children:(0,D.jsxs)("div",{className:"max-w-xs space-y-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium",children:e("role",{ns:"common"})}),(0,D.jsxs)(R.l,{value:ce,onChange:e=>oe(e.target.value),className:"w-full dark:border-gray-700 dark:bg-gray-800 dark:text-white",children:[(0,D.jsx)("option",{value:"",children:e("allRoles")}),(0,D.jsx)("option",{value:"admin",children:e("admin")}),(0,D.jsx)("option",{value:"manager",children:e("manager")}),(0,D.jsx)("option",{value:"user",children:e("user")}),(0,D.jsx)("option",{value:"deliverer",children:e("deliverer")})]})]})}),(0,D.jsxs)("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,D.jsx)(S.Zp,{children:(0,D.jsxs)(S.Wu,{className:"flex flex-col items-center justify-center pt-6",children:[(0,D.jsx)("span",{className:"text-3xl font-bold",children:te}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:e("totalUsers")})]})}),(0,D.jsx)(S.Zp,{children:(0,D.jsxs)(S.Wu,{className:"flex flex-col items-center justify-center pt-6",children:[(0,D.jsx)("span",{className:"text-3xl font-bold",children:Me}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:e("administrators")})]})}),(0,D.jsx)(S.Zp,{children:(0,D.jsxs)(S.Wu,{className:"flex flex-col items-center justify-center pt-6",children:[(0,D.jsx)("span",{className:"text-3xl font-bold",children:Re}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:e("regularUsers")})]})}),(0,D.jsx)(S.Zp,{children:(0,D.jsxs)(S.Wu,{className:"flex flex-col items-center justify-center pt-6",children:[(0,D.jsx)("span",{className:"text-3xl font-bold",children:Se}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:e("activeUsers")})]})})]}),(0,D.jsxs)(S.Zp,{className:"mb-6 overflow-hidden",children:[(0,D.jsxs)(z.XI,{children:[(0,D.jsx)(z.A0,{children:(0,D.jsxs)(z.Hj,{className:"bg-muted/50",children:[(0,D.jsx)(z.nd,{children:e("user",{ns:"common"})}),(0,D.jsx)(z.nd,{children:e("contact",{ns:"common"})}),(0,D.jsx)(z.nd,{children:e("role",{ns:"common"})}),(0,D.jsx)(z.nd,{children:e("status",{ns:"common"})}),(0,D.jsx)(z.nd,{children:e("created",{ns:"common"})}),(0,D.jsx)(z.nd,{className:"text-right",children:e("actionsHeader",{ns:"common"})})]})}),(0,D.jsx)(z.BF,{children:s.map((s=>(0,D.jsxs)(z.Hj,{children:[(0,D.jsx)(z.nA,{children:(0,D.jsxs)("div",{className:"flex flex-col",children:[(0,D.jsx)("span",{className:"font-medium",children:s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.firstName||s.lastName||"No Name"}),(0,D.jsx)("span",{className:"text-xs text-muted-foreground",children:s.email})]})}),(0,D.jsx)(z.nA,{children:(0,D.jsxs)("div",{className:"flex flex-col",children:[(0,D.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,D.jsx)(h.A,{className:"h-3 w-3 text-muted-foreground"}),(0,D.jsx)("span",{children:s.email})]}),s.phone&&(0,D.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,D.jsx)(u.A,{className:"h-3 w-3 text-muted-foreground"}),(0,D.jsx)("span",{children:s.phone})]})]})}),(0,D.jsx)(z.nA,{children:s._id===(null===H||void 0===H?void 0:H._id)?Ee(s.role):(0,D.jsxs)(R.l,{value:s.role,onChange:a=>(async(s,a)=>{if(s!==(null===H||void 0===H?void 0:H._id)||"admin"===a)try{await A.Eo.updateRole(s,a),b.oR.success(e("users.updateUserSuccess")),ve()}catch(l){var r,t;console.error("Error updating user role:",l),b.oR.error((null===(r=l.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||e("error"))}else b.oR.error(e("users.cannotDeactivateOwn"))})(s._id,a.target.value),className:"w-32 dark:border-gray-700 dark:bg-gray-800 dark:text-white",children:[(0,D.jsx)("option",{value:"user",children:e("users.user")}),(0,D.jsx)("option",{value:"admin",children:e("users.admin")}),(0,D.jsx)("option",{value:"manager",children:e("users.manager")}),(0,D.jsx)("option",{value:"deliverer",children:e("users.deliverer")})]})}),(0,D.jsx)(z.nA,{children:(0,D.jsx)(_.E,{variant:s.isActive?"success":"destructive",className:"flex items-center gap-1",children:s.isActive?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p.A,{className:"h-3 w-3"}),e("users.active")]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.A,{className:"h-3 w-3"}),e("users.inactive")]})})}),(0,D.jsx)(z.nA,{children:(0,D.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,D.jsx)(w,{className:"h-3 w-3 text-muted-foreground"}),new Date(s.createdAt).toLocaleDateString()]})}),(0,D.jsx)(z.nA,{children:(0,D.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>(async e=>{W(e),X(!0)})(s),children:(0,D.jsx)(f.A,{className:"h-4 w-4"})}),(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>(e=>{W(e),ue({email:e.email||"",firstName:e.firstName||"",lastName:e.lastName||"",phone:e.phone||"",role:e.role||"user",password:"",confirmPassword:""}),Y("edit"),V(!0)})(s),children:(0,D.jsx)(j.A,{className:"h-4 w-4"})}),s._id!==(null===H||void 0===H?void 0:H._id)&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-amber-500 hover:text-amber-600",onClick:()=>(async s=>{if(s!==(null===H||void 0===H?void 0:H._id)){if(window.confirm(e("users.deactivateWarning")))try{await A.Eo.deactivate(s),b.oR.success(e("users.userDeactivated")),ve()}catch(t){var a,r;console.error("Error deactivating user:",t),b.oR.error((null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||e("error"))}}else b.oR.error(e("users.cannotDeactivateOwn"))})(s._id),disabled:!s.isActive,children:(0,D.jsx)(g.A,{className:"h-4 w-4"})}),(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive/80",onClick:()=>(async s=>{if(s!==(null===H||void 0===H?void 0:H._id)){if(window.confirm(e("users.deleteWarning")))try{await A.Eo.delete(s),b.oR.success(e("users.userDeleted")),ve()}catch(t){var a,r;console.error("Error deleting user:",t),b.oR.error((null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||e("error"))}}else b.oR.error(e("users.cannotDeleteOwn"))})(s._id),children:(0,D.jsx)(N.A,{className:"h-4 w-4"})})]})]})})]},s._id)))})]}),0===s.length&&!t&&(0,D.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,D.jsx)(n.A,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,D.jsx)("h3",{className:"mb-2 text-lg font-medium",children:e("noUsersFound")}),(0,D.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:e("noUsersFoundDescription")}),(0,D.jsxs)(E.$,{onClick:Pe,className:"flex items-center gap-2",children:[(0,D.jsx)(c.A,{className:"h-4 w-4"}),e("addUser")]})]})]}),ae>1&&(0,D.jsxs)("div",{className:"mb-6 flex items-center justify-between py-4",children:[(0,D.jsxs)(E.$,{variant:"outline",size:"sm",onClick:()=>se((e=>Math.max(e-1,1))),disabled:1===ee,className:"flex items-center gap-1",children:[(0,D.jsx)(v.A,{className:"h-4 w-4"}),e("common.previous")]}),(0,D.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e("common.page")," ",ee," ",e("common.of")," ",ae," (",te," ",e("common.total"),")"]}),(0,D.jsxs)(E.$,{variant:"outline",size:"sm",onClick:()=>se((e=>Math.min(e+1,ae))),disabled:ee===ae,className:"flex items-center gap-1",children:[e("common.next"),(0,D.jsx)(y.A,{className:"h-4 w-4"})]})]}),(0,D.jsx)($.l,{open:I,onOpenChange:V,children:(0,D.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,D.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white text-black shadow-lg dark:bg-gray-800 dark:text-white",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 p-6 dark:border-gray-700",children:[(0,D.jsx)("h2",{className:"text-xl font-semibold",children:e("create"===Q?"newUser":"editUser")}),(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>V(!1),children:(0,D.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,D.jsxs)("form",{onSubmit:"create"===Q?async s=>{s.preventDefault();const a=!he.email||!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(he.email),r=he.firstName&&he.firstName.length<2,t=he.lastName&&he.lastName.length<2,l=he.phone&&!/^[+]?[0-9\s-()]{7,}$/.test(he.phone);let n=!1,i=!1,d=!1;if("create"===Q){n=!he.password||he.password.length<6;const e=/\d/.test(he.password),s=/[a-zA-Z]/.test(he.password);n=n||!e||!s,i=!he.confirmPassword,d=he.password!==he.confirmPassword}if(ge({email:a,firstName:r,lastName:t,phone:l,password:n,confirmPassword:i,passwordMatch:d}),!(a||r||t||l||n||i||d))try{const s={email:he.email,password:he.password,firstName:he.firstName,lastName:he.lastName,phone:he.phone,role:he.role};await A.Eo.create(s);b.oR.success(e("users.createUserSuccess")),V(!1),ke(),ve()}catch(c){console.error("Error creating user:",c),c.message?b.oR.error(c.message):b.oR.error(e("error")),"true"==={NODE_ENV:"production",PUBLIC_URL:"/logistics-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://logistics-dashboard.onrender.com/api"}.REACT_APP_DEMO_MODE&&(V(!1),ke(),b.oR.success(e("users.createUserSuccess")+" (Demo)"))}}:async s=>{s.preventDefault();const r=!he.email||!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(he.email),t=he.firstName&&he.firstName.length<2,l=he.lastName&&he.lastName.length<2,n=he.phone&&!/^[+]?[0-9\s-()]{7,}$/.test(he.phone);if(ge({...pe,email:r,firstName:t,lastName:l,phone:n}),!(r||t||l||n))try{const s={email:he.email,firstName:he.firstName,lastName:he.lastName,phone:he.phone};await A.Eo.updateProfile(s),he.role!==F.role&&await A.Eo.updateRole(F._id,he.role),b.oR.success(e("users.updateUserSuccess")),V(!1),ke(),ve()}catch(c){var i,d;console.error("Error updating user:",c),b.oR.error((null===(i=c.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.message)||e("error")),a((e=>e.map((e=>e._id===F._id?{...e,email:he.email,firstName:he.firstName,lastName:he.lastName,phone:he.phone,role:he.role}:e)))),V(!1),ke(),b.oR.success(e("users.updateUserSuccess")+" (Demo)")}},className:"space-y-6 p-6",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium dark:text-gray-200",children:e("userDetails")}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("email")," *"]}),(0,D.jsx)(M.p,{type:"email",value:he.email,onChange:e=>ye("email",e.target.value),required:!0,placeholder:"user@example.com",pattern:"^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$",title:e("validation.invalidEmail"),className:pe.email?"border-red-500":""}),pe.email&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.invalidEmail")}),(0,D.jsx)("small",{className:"text-xs text-muted-foreground",children:e("validation.validEmailRequired")})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:e("role")}),(0,D.jsxs)(R.l,{value:he.role,onChange:e=>ye("role",e.target.value),className:"w-full dark:border-gray-700 dark:bg-gray-800 dark:text-white "+(pe.role?"border-red-500":""),children:[(0,D.jsx)("option",{value:"user",children:e("user")}),(0,D.jsx)("option",{value:"admin",children:e("admin")}),(0,D.jsx)("option",{value:"manager",children:e("manager")}),(0,D.jsx)("option",{value:"deliverer",children:e("deliverer")})]}),pe.role&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.roleRequired")})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:e("firstName")}),(0,D.jsx)(M.p,{type:"text",value:he.firstName,onChange:e=>ye("firstName",e.target.value),minLength:"2",title:e("validation.firstNameLength"),className:pe.firstName?"border-red-500":""}),pe.firstName&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.firstNameLength")})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:e("lastName")}),(0,D.jsx)(M.p,{type:"text",value:he.lastName,onChange:e=>ye("lastName",e.target.value),minLength:"2",title:e("validation.lastNameLength"),className:pe.lastName?"border-red-500":""}),pe.lastName&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.lastNameLength")})]})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium dark:text-gray-200",children:e("phone")}),(0,D.jsx)(M.p,{type:"tel",value:he.phone,onChange:e=>ye("phone",e.target.value),pattern:"^[+]?[0-9\\s-()]{7,}$",title:e("validation.invalidPhone"),placeholder:"+1 (555) 123-4567",className:pe.phone?"border-red-500":""}),pe.phone&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.invalidPhone")}),(0,D.jsx)("small",{className:"text-xs text-muted-foreground",children:e("validation.phoneFormat")})]})]}),"create"===Q&&(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium dark:text-gray-200",children:e("security",{ns:"settings"})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("password")," *"]}),(0,D.jsx)(M.p,{type:"password",value:he.password,onChange:e=>ye("password",e.target.value),required:!0,minLength:6,pattern:"^(?=.*[0-9])(?=.*[a-zA-Z]).{6,}$",title:e("auth.passwordComplexity"),className:pe.password?"border-red-500":""}),pe.password&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordComplexity")}),(0,D.jsx)("small",{className:"text-xs text-muted-foreground",children:e("validation.passwordRequirements")})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("confirmPassword")," *"]}),(0,D.jsx)(M.p,{type:"password",value:he.confirmPassword,onChange:e=>ye("confirmPassword",e.target.value),required:!0,minLength:6,className:pe.confirmPassword||pe.passwordMatch?"border-red-500":""}),pe.confirmPassword&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordsDoNotMatch")}),pe.passwordMatch&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordsDoNotMatch")})]})]})]}),(0,D.jsxs)("div",{className:"flex justify-end gap-2 border-t border-gray-200 pt-4 dark:border-gray-700",children:[(0,D.jsx)(E.$,{type:"button",variant:"outline",onClick:()=>V(!1),children:e("cancel",{ns:"common"})}),(0,D.jsx)(E.$,{type:"submit",disabled:Object.values(pe).some(Boolean),children:"create"===Q?e("addUser"):e("save",{ns:"common"})})]})]})]})})}),K&&F&&(0,D.jsx)($.l,{open:K,onOpenChange:X,children:(0,D.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,D.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white text-black shadow-lg dark:bg-gray-800 dark:text-white",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 p-6 dark:border-gray-700",children:[(0,D.jsx)("h2",{className:"text-xl font-semibold",children:e("userDetails")}),(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>X(!1),children:(0,D.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,D.jsxs)("div",{className:"space-y-6 p-6",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium dark:text-gray-200",children:e("userDetails")}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsxs)("label",{className:"text-sm font-medium text-muted-foreground",children:[e("firstName")," ",e("lastName")]}),(0,D.jsx)("p",{children:F.firstName&&F.lastName?`${F.firstName} ${F.lastName}`:F.firstName||F.lastName||e("common.noResults")})]}),(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e("email")}),(0,D.jsx)("p",{children:F.email})]}),(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e("phone")}),(0,D.jsx)("p",{children:F.phone||e("noResults",{ns:"common"})})]}),(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e("role")}),(0,D.jsx)("div",{children:Ee(F.role)})]})]})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium dark:text-gray-200",children:e("status",{ns:"common"})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e("status",{ns:"common"})}),(0,D.jsx)("div",{children:(0,D.jsx)(_.E,{variant:F.isActive?"success":"destructive",className:"flex items-center gap-1",children:F.isActive?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p.A,{className:"h-3 w-3"}),e("active")]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(g.A,{className:"h-3 w-3"}),e("inactive")]})})})]}),(0,D.jsxs)("div",{className:"space-y-1",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e("created",{ns:"common"})}),(0,D.jsx)("p",{children:new Date(F.createdAt).toLocaleDateString()})]})]})]})]})]})})}),G&&(0,D.jsx)($.l,{open:G,onOpenChange:J,children:(0,D.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,D.jsxs)("div",{className:"w-full max-w-lg rounded-lg bg-white text-black shadow-lg dark:bg-gray-800 dark:text-white",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 p-6 dark:border-gray-700",children:[(0,D.jsx)("h2",{className:"text-xl font-semibold",children:e("changePassword")}),(0,D.jsx)(E.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>J(!1),children:(0,D.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,D.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const a=!we.currentPassword.trim(),r=!we.newPassword.trim()||we.newPassword.length<6,t=/\d/.test(we.newPassword),l=/[a-zA-Z]/.test(we.newPassword),n=r||!t||!l,i=!we.confirmPassword.trim(),d=we.newPassword!==we.confirmPassword;if(Ne({currentPassword:a,newPassword:n,confirmPassword:i,passwordMatch:d}),!(a||n||i||d))try{await A.Eo.changePassword({currentPassword:we.currentPassword,newPassword:we.newPassword,confirmPassword:we.confirmPassword}),b.oR.success(e("users.passwordChanged")),J(!1),Ae()}catch(m){var c,o;console.error("Error changing password:",m),b.oR.error((null===(c=m.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.message)||e("error")),"password123"===we.currentPassword&&(J(!1),Ae(),b.oR.success(e("users.passwordChanged")+" (Demo)"))}},className:"space-y-6 p-6",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium dark:text-gray-200",children:e("security",{ns:"settings"})}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("currentPassword")," *"]}),(0,D.jsx)(M.p,{type:"password",value:we.currentPassword,onChange:e=>be("currentPassword",e.target.value),required:!0}),je.currentPassword&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("validation.currentPasswordRequired")})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("newPassword")," *"]}),(0,D.jsx)(M.p,{type:"password",value:we.newPassword,onChange:e=>be("newPassword",e.target.value),required:!0,minLength:6,pattern:"^(?=.*[0-9])(?=.*[a-zA-Z]).{6,}$",title:e("auth.passwordComplexity")}),(0,D.jsx)("small",{className:"text-xs text-muted-foreground",children:e("validation.passwordRequirements")}),je.newPassword&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordComplexity")})]}),(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsxs)("label",{className:"text-sm font-medium dark:text-gray-200",children:[e("confirmPassword")," *"]}),(0,D.jsx)(M.p,{type:"password",value:we.confirmPassword,onChange:e=>be("confirmPassword",e.target.value),required:!0,minLength:6}),je.confirmPassword&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordsDoNotMatch")}),je.passwordMatch&&(0,D.jsx)("p",{className:"text-xs text-red-500",children:e("auth.passwordsDoNotMatch")})]})]})]}),(0,D.jsxs)("div",{className:"flex justify-end gap-2 border-t border-gray-200 pt-4 dark:border-gray-700",children:[(0,D.jsx)(E.$,{type:"button",variant:"outline",onClick:()=>J(!1),children:e("cancel",{ns:"common"})}),(0,D.jsx)(E.$,{type:"submit",disabled:Object.values(je).some(Boolean),children:e("changePassword")})]})]})]})})})]})}},2732:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7967:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},4289:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3329:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6424:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6677:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6260:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},2665:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6870:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},5964:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9382:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3877:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},5114:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},529:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2244:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},7333:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3964:(e,s,a)=>{a.d(s,{A:()=>r});const r=(0,a(541).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);
//# sourceMappingURL=946.87485361.chunk.js.map